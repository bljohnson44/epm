<HTML>
<BODY>

<H1 ALIGN="RIGHT"><A NAME="REFERENCE">C - List File Reference</A></H1>

<P>This appendix provides a complete reference for the EPM list file
and setup types formats.</P>

<H2>The EPM List File Format</H2>

<P>Each <I>EPM</I> product has an associated list file that
describes the files to include with the product. Comment lines
begin with the "#" character and are ignored. All other
non-blank lines must begin with a letter, dollar sign ("$"), or
the percent sign ("%").</P>

<H3>List File Directives</H3>

<P>The following list describes all of the list file directives
supported by <I>EPM</I>:</P>

<DL>

	<DD>$name=value</DD>

	<DD>Sets the named variable to <I>value</I>.
	<B>Note:</B> Variables set in the list file are
	overridden by variables specified on the command-line or
	in the current environment.</DD>

	<DD>%copyright <I>copyright notice</I></DD>

	<DD>Sets the copyright notice for the file.</DD>

	<DD>%description <I>description text</I></DD>

	<DD>Adds a line of descriptive text to the distribution.
	Multiple lines are supported.</DD>

	<DD>%format <I>format [... format]</I></DD>

	<DD>Uses following files and directives only if the
	distribution format is the same as <I>format</I>.</DD>

	<DD>%format !<I>format [... format]</I></DD>

	<DD>Uses following files and directives only if the
	distribution format is not the same as
	<I>format</I>.</DD>

	<DD>%if <I>variable [... variable]</I><BR>
	%if !<I>variable [... variable]</I><BR>
	%ifdef <I>variable [... variable]</I><BR>
	%ifdef !<I>variable [... variable]</I><BR>
	%elseif <I>variable [... variable]</I><BR>
	%elseif !<I>variable [... variable]</I><BR>
	%elseifdef <I>variable [... variable]</I><BR>
	%elseifdef !<I>variable [... variable]</I><BR>
	%else<BR>
	%endif</DD>

	<DD>Conditionally includes lines in the list file. The
	<I>%if</I> lines include the lines that follow if the
	named variables are (not) defined with a value. The
	<I>%ifdef</I> lines include the lines that follow if the
	named variables are (not) defined with any value. These
	conditional lines cannot be nested.</DD>

	<DD>%include <I>filename</I></DD>

	<DD>Includes files listed in <I>filename</I>.</DD>

	<DD>%incompat <I>product</I></DD>

	<DD>%incompat <I>filename</I></DD>

	<DD>Indicates that this product is incompatible with the
	named product or file.</DD>

	<DD>%install <I>script or program</I></DD>

	<DD>Specifies a script or program to be run after all
	files are installed. (This has been obsoleted by the
	%postinstall directive)</DD>

	<DD>%license <I>license file</I></DD>

	<DD>Specifies the file to display as the software
	license.</DD>

	<DD>%packager <I>name of packager</I></DD>

	<DD>Specifies the name of the packager.</DD>

	<DD>%patch <I>script or program</I></DD>

	<DD>Specifies a script or program to be run after all
	files are patched. (This has been obsoleted by the
	%postpatch directive)</DD>

	<DD>%postinstall <I>script or program</I><BR>
	%postinstall &lt;<I>scriptfile</I><BR>
	%postinstall &lt;&lt;<I>string</I></DD>

	<DD>Specifies a script or program to be run after all
	files are installed.</DD>

	<DD>%postpatch <I>script or program</I><BR>
	%postpatch &lt;<I>scriptfile</I><BR>
	%postpatch &lt;&lt;<I>string</I></DD>

	<DD>Specifies a script or program to be run after all
	files are patched.</DD>

	<DD>%postremove <I>script or program</I><BR>
	%postremove &lt;<I>scriptfile</I><BR>
	%postremove &lt;&lt;<I>string</I></DD>

	<DD>Specifies a script or program to be run after removing files.</DD>

	<DD>%preinstall <I>script or program</I><BR>
	%preinstall &lt;<I>scriptfile</I><BR>
	%preinstall &lt;&lt;<I>string</I></DD>

	<DD>Specifies a script or program to be run before all
	files are installed.</DD>

	<DD>%prepatch <I>script or program</I><BR>
	%prepatch &lt;<I>scriptfile</I><BR>
	%prepatch &lt;&lt;<I>string</I></DD>

	<DD>Specifies a script or program to be run before all
	files are patched.</DD>

	<DD>%preremove <I>script or program</I><BR>
	%preremove &lt;<I>scriptfile</I><BR>
	%preremove &lt;&lt;<I>string</I></DD>

	<DD>Specifies a script or program to be run before removing files.</DD>

	<DD>%product <I>product name</I></DD>

	<DD>Specifies the product name.</DD>

	<DD>%readme <I>readme file</I></DD>

	<DD>Specifies a README file to be included in the distribution.</DD>

	<DD>%remove <I>script or program</I></DD>

	<DD>Specifies a script or program to be run before removing files.
	(This has been obsoleted by the %preremove directive)</DD>

	<DD>%release <I>number</I></DD>

	<DD>Specifies the release or build number of a product
	(defaults to 1).</DD>

	<DD>%replaces <I>product</I></DD>

	<DD>Indicates that this product replaces the named product.</DD>

	<DD>%requires <I>product</I></DD>

	<DD>%requires <I>filename</I></DD>

	<DD>Indicates that this product requires the named product or file.</DD>

	<DD>%vendor <I>vendor or author name</I></DD>

	<DD>Specifies the vendor or author of the product.</DD>

	<DD>%version <I>version number</I></DD>

	<DD>Specifies the version number of the product.</DD>

	<DD>%system <I>system[-release] [... system[-release]]</I></DD>

	<DD>Specifies that the following files should only be
	used for the specified operating systems and
	releases.</DD>

	<DD>%system !<I>system[-release] [... system[-release]]</I></DD>

	<DD>Specifies that the following files should not be
	used for the specified operating systems and
	releases.</DD>

	<DD>%system all</DD>

	<DD>Specifies that the following files are applicable to
	all operating systems.</DD>

	<DD>c <I>mode user group destination source</I></DD>

	<DD>C <I>mode user group destination source</I></DD>

	<DD>Specifies a configuration file for installation. The
	second form specifies that the file has changed or is
	new and should be included as part of a patch.
	Configuration files are installed as "destination.N" if
	the destination already exists.</DD>

	<DD>d <I>mode user group destination -</I></DD>

	<DD>D <I>mode user group destination -</I></DD>

	<DD>Specifies a directory should be created when
	installing the software. The second form specifies that
	the directory is new and should be included as part of a
	patch.</DD>

	<DD>f <I>mode user group destination source [nostrip()]</I></DD>

	<DD>F <I>mode user group destination source [nostrip()]</I></DD>

	<DD>Specifies a file for installation. The second form
	specifies that the file has changed or is new and should
	be included as part of a patch. If the "nostrip()"
	option is included, the file will not be stripped before
	the installation is created.</DD>

	<DD>f <I>mode user group destination source/pattern [nostrip()]</I></DD>

	<DD>F <I>mode user group destination source/pattern [nostrip()]</I></DD>

	<DD>Specifies one or more files for installation using
	shell wildcard patterns. The second form specifies that
	the files have changed or are new and should be included
	as part of a patch. If the "nostrip()" option is
	included, the file will not be stripped before the
	installation is created.</DD>

	<DD>i <I>mode user group service-name source ["options"]</I></DD>

	<DD>I <I>mode user group service-name source ["options"]</I></DD>

	<DD>Specifies an initialization script for installation.
	The second form specifies that the file has changed or
	is new and should be included as part of a patch.
	Initialization scripts are stored in
	<VAR>/etc/software/init.d</VAR> and are linked to the
	appropriate system-specific directories for run levels
	0, 2, 3, and 5. Initialization scripts <B>must</B>
	accept at least the <I>start</I> and <I>stop</I>
	commands. The optional <I>options</I> following the
	source filename can be any of the following:
	
	<DL>

		<DD>order(<I>string</I>)</DD>

		<DD>Specifies the relative startup order
		compared to the required and used system
		functions. Supported values include First,
		Early, None, Late, and Last (OSX only).</DD>

		<DD>provides(<I>name(s)</I>)</DD>

		<DD>Specifies names of system functions that are
		provided by this startup item (OSX only).</DD>

		<DD>requires(<I>name(s)</I>)</DD>

		<DD>Specifies names of system functions that are
		required by this startup item (OSX only).</DD>

		<DD>runlevels(<I>levels</I>)</DD>

		<DD>Specifies the run levels to use.</DD>

		<DD>start(<I>number</I>)</DD>

		<DD>Specifies the starting sequence number from
		00 to 99.</DD>

		<DD>stop(<I>number</I>)</DD>

		<DD>Specifies the ending sequence number from 00
		to 99.</DD>

		<DD>uses(<I>name(s)</I>)</DD>

		<DD>Specifies names of system functions that are
		used by this startup item (OSX only).</DD>

	</DL></DD>

	<DD>l <I>mode user group destination source</I></DD>

	<DD>L <I>mode user group destination source</I></DD>

	<DD>Specifies a symbolic link in the installation. The
	second form specifies that the link has changed or is
	new and should be included as part of a patch.</DD>

	<DD>R <I>mode user group destination</I></DD>

	<DD>Specifies that the file is to be removed upon
	patching.  The <I>user</I> and <I>group</I> fields are
	ignored.  The <I>mode</I> field is only used to
	determine if a check should be made for a previous
	version of the file.</DD>

</DL>

<H3>List Variables</H3>

<P><I>EPM</I> maintains a list of variables and their values
which can be used to substitute values in the list file. These
variables are imported from the current environment and taken
from the command-line and list file as provided. Substitutions
occur when the variable name is referenced with the dollar sign
($):</P>

<UL><PRE>
%postinstall &lt;&lt;EOF
echo What is your name:
read $$name
echo Your name is $$name
EOF

f 0555 root sys ${bindir}/foo foo
f 0555 root sys $datadir/foo/foo.dat foo.dat
</PRE></UL>

<P>Variable names can be surrounded by curley brackets (${name})
or alone ($name); without brackets the name is terminated by the
first slash (/), dash (-), or whitespace. The dollar sign can be
inserted using $$.</P>

<H2><A NAME="SETUPTYPES">The setup.types File</A></H2>

<P>The EPM <B>setup</B> program normally presents the user with
a list of software products to install, which is called a
"custom" software installation.</P>

<P>If a file called <I>setup.types</I> is present in the package
directory, the user will instead be presented with a list of
instal- lation types. Each type has an associated product list
which determines the products that are installed by default. If
a type has no products associated with it, then it is treated as
a custom installation and the user is presented with a list of
packages to choose from.</P>

<P>The <I>setup.types</I> file is an ASCII text file consisting
of type and product lines. Comments can be inserted by starting
a line with the pound sign (#). Each installation type is
defined by a line starting with the word <CODE>TYPE</CODE>.
Products are defined by a line starting with the word
<CODE>INSTALL</CODE>:</P>

<UL><PRE>
TYPE Typical End-User Configuration
INSTALL foo
INSTALL foo-help
TYPE Typical Developer Configuration
INSTALL foo
INSTALL foo-help
INSTALL foo-devel
INSTALL foo-examples
TYPE Custom Configuration
</PRE></UL>

<P>In the example above, three installation types are defined.
Since the last type includes no products, the user will be
presented with the full list of products to choose from.</P>

</BODY>
</HTML>
