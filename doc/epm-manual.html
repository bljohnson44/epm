<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>Software Distribution Using the ESP Package Manager</TITLE>
<META NAME="author" CONTENT="Michael Sweet">
<META NAME="copyright" CONTENT="Copyright 1999-2001 by Easy Software Products">
<META NAME="docnumber" CONTENT="ESP-004-20010705">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso-8859-1">
<STYLE TYPE="text/css"><!--
BODY { font-family: serif }
H1 { font-family: sans-serif }
H2 { font-family: sans-serif }
H3 { font-family: sans-serif }
H4 { font-family: sans-serif }
H5 { font-family: sans-serif }
H6 { font-family: sans-serif }
SUB { font-size: smaller }
SUP { font-size: smaller }
PRE { font-family: monospace }
--></STYLE>
</HEAD>
<BODY>
<CENTER><A HREF="#CONTENTS"><IMG SRC="epmlogo.gif" BORDER="0" WIDTH="256" HEIGHT="256"><BR>
<H1>Software Distribution Using the ESP Package Manager</H1></A><BR>
ESP-004-20010705<BR>
Michael Sweet<BR>
Copyright 1999-2001 by Easy Software Products<BR>
</CENTER>
<HR>
<H1 ALIGN="CENTER"><A NAME="CONTENTS">Table of Contents</A></H1>
<BR>
<BR><B><A HREF="#1">Preface</A></B>
<UL>
<LI><A HREF="#1_1">Organization of this Manual</A></LI>
<LI><A HREF="#1_2">Notation Conventions</A></LI>
<LI><A HREF="#1_3">Abbreviations</A></LI>
<LI><A HREF="#1_4">Other References</A></LI>
</UL>
<B><A HREF="#INTRO">1 - Introduction to EPM</A></B>
<UL>
<LI><A HREF="#2_1">What is EPM?</A></LI>
<LI><A HREF="#2_2">History and Evolution</A></LI>
<LI><A HREF="#2_3">Existing Software Packaging Systems</A></LI>
<LI><A HREF="#2_4">Design Goals of EPM</A></LI>
<LI><A HREF="#2_5">Resources</A></LI>
</UL>
<B><A HREF="#BUILDING">2 - Building EPM</A></B>
<UL>
<LI><A HREF="#3_1">Requirements</A></LI>
<LI><A HREF="#3_2">Configuring the Software</A></LI>
<LI><A HREF="#3_3">Building the Software</A></LI>
<LI><A HREF="#3_4">Installing the Software</A></LI>
</UL>
<B><A HREF="#PACKAGING">Packaging Your Software with EPM</A></B>
<UL>
<LI><A HREF="#4_1">The Basics</A></LI>
<LI><A HREF="#4_2">Building a Software Distribution</A></LI>
<LI><A HREF="#4_3">Installing the Software Package</A></LI>
<LI><A HREF="#4_4">Including the Setup GUI</A></LI>
</UL>
<B><A HREF="#ADVANCED">Advanced Packaging with EPM</A></B>
<UL>
<LI><A HREF="#5_1">Including Other List Files</A></LI>
<LI><A HREF="#5_2">Conflicts, Replaces, and Requires</A></LI>
<LI><A HREF="#5_3">Scripts</A></LI>
<LI><A HREF="#5_4">Conditional Directives</A></LI>
<LI><A HREF="#5_5">Software Patches</A></LI>
<LI><A HREF="#5_6">Variables</A></LI>
<LI><A HREF="#5_7">Init Scripts</A></LI>
</UL>
<B><A HREF="#LICENSE">Appendix A - GNU General Public License</A></B>
<BR>
<BR><B><A HREF="#MANPAGES">B - Command Reference</A></B>
<UL>
<LI><A HREF="#epm">epm</A></LI>
<LI><A HREF="#epminstall">epminstall</A></LI>
<LI><A HREF="#mkepmlist">mkepmlist</A></LI>
<LI><A HREF="#setup">setup</A></LI>
</UL>
<B><A HREF="#REFERENCE">C - List File Reference</A></B>
<UL>
<LI><A HREF="#8_1">The EPM List File Format</A></LI>
<LI><A HREF="#SETUPTYPES">The setup.types File</A></LI>
</UL>
<B><A HREF="#RELNOTES">D - Release Notes</A></B>
<UL>
<LI><A HREF="#9_1">Changes in EPM v3.0</A></LI>
<LI><A HREF="#9_2">Changes in EPM v2.8</A></LI>
<LI><A HREF="#9_3">Changes in EPM v2.7</A></LI>
<LI><A HREF="#9_4">Changes in EPM v2.6</A></LI>
<LI><A HREF="#9_5">Changes in EPM v2.5</A></LI>
<LI><A HREF="#9_6">Changes in EPM v2.4</A></LI>
<LI><A HREF="#9_7">Changes in EPM v2.3</A></LI>
<LI><A HREF="#9_8">Changes in EPM v2.2</A></LI>
<LI><A HREF="#9_9">Changes in EPM v2.1</A></LI>
<LI><A HREF="#9_10">Changes in EPM v2.0</A></LI>
<LI><A HREF="#9_11">Changes in EPM v1.7</A></LI>
<LI><A HREF="#9_12">Changes in EPM v1.6</A></LI>
<LI><A HREF="#9_13">Changes in EPM v1.5</A></LI>
<LI><A HREF="#9_14">Changes in EPM v1.4</A></LI>
<LI><A HREF="#9_15">Changes in EPM v1.3</A></LI>
<LI><A HREF="#9_16">Changes in EPM v1.2</A></LI>
<LI><A HREF="#9_17">Changes in EPM v1.1</A></LI>
</UL>
<HR>
<H1 ALIGN="RIGHT"><A NAME="1">Preface</A></H1>
<P>This document provides a tutorial and reference for the ESP Package
 Manager (&quot;EPM&quot;) software, version 3.0.</P>
<H2><A NAME="1_1">Organization of this Manual</A></H2>
<P>This document is organized into the following chapters and
 appendices:</P>
<UL>
<LI><A HREF="#INTRO">1 - Introduction to EPM</A></LI>
<LI><A HREF="#BUILDING">2 - Building EPM</A></LI>
<LI><A HREF="#PACKAGING">3 - Packaging Your Software with EPM</A></LI>
<LI><A HREF="#ADVANCED">4 - Advanced Packaging with EPM</A></LI>
<LI><A HREF="#LICENSE">A - Software License Agreement</A></LI>
<LI><A HREF="#MANPAGES">B - Command Reference</A></LI>
<LI><A HREF="#REFERENCE">C - List File Reference</A></LI>
<LI><A HREF="#RELNOTES">D - Release Notes</A></LI>
<LI><A HREF="#SAMPLE">E - Sample List File</A></LI>
</UL>

<!-- NEED 6in -->
<H2><A NAME="1_2">Notation Conventions</A></H2>
<P>Various font and syntax conventions are used in this guide. Examples
 and their meanings and uses are explained below:</P>
<CENTER>
<TABLE WIDTH="80%">
<TR><TH>Example</TH><TD>&nbsp;&nbsp;&nbsp;</TD><TH>Description</TH></TR>
<TR><TD>&nbsp;</TD></TR>
<TR VALIGN="TOP"><TD><CODE>epm</CODE>
<BR> <CODE>epm(1)</CODE></TD><TD>&nbsp;&nbsp;&nbsp;</TD><TD>The names of commands; the
 first mention of a command or function in a chapter is followed by a
 manual page section number.</TD></TR>
<TR><TD>&nbsp;</TD></TR>
<TR VALIGN="TOP"><TD><VAR>/var</VAR>
<BR><VAR> /usr/bin/epm</VAR></TD><TD>&nbsp;&nbsp;&nbsp;</TD><TD>File and directory
 names.</TD></TR>
<TR><TD>&nbsp;</TD></TR>
<TR VALIGN="TOP"><TD NOWRAP><TT>Request ID is Printer-123</TT></TD><TD>
&nbsp;&nbsp;&nbsp;</TD><TD>Screen output.</TD></TR>
<TR><TD>&nbsp;</TD></TR>
<TR VALIGN="TOP"><TD NOWRAP><KBD>lp -d printer filename ENTER</KBD></TD><TD>
&nbsp;&nbsp;&nbsp;</TD><TD>Literal user input; special keys like <KBD>ENTER</KBD> are
 in ALL CAPS.</TD></TR>
<TR><TD>&nbsp;</TD></TR>
<TR VALIGN="TOP"><TD NOWRAP><KBD>foo start of long command \
<BR> &nbsp;&nbsp;&nbsp;end of long command ENTER</KBD></TD><TD>&nbsp;&nbsp;&nbsp;</TD><TD>Long
 commands are broken up on multiple lines using the backslash (\)
 character. Enter the commands without the backslash.</TD></TR>
<TR><TD>&nbsp;</TD></TR>
<TR VALIGN="TOP"><TD>12.3</TD><TD>&nbsp;&nbsp;&nbsp;</TD><TD>Numbers in the text are
 written using the period (.) to indicate the decimal point.</TD></TR>
</TABLE>
</CENTER>

<!-- NEED 3in -->
<H2><A NAME="1_3">Abbreviations</A></H2>
<P>The following abbreviations are used throughout this manual:</P>
<UL>
<DL>
<DT>kb</DT>
<DD>Kilobytes, or 1024 bytes
<BR>&nbsp;</DD>
<DT>Mb</DT>
<DD>Megabytes, or 1048576 bytes
<BR>&nbsp;</DD>
<DT>Gb</DT>
<DD>Gigabytes, or 1073741824 bytes
<BR>&nbsp;</DD>
</DL>
</UL>
<H2><A NAME="1_4">Other References</A></H2>
<UL>
<DL>
<DT><A HREF="http://www.easysw.com/epm/">http://www.easysw.com/epm/</A></DT>
<DD>The official home page of the ESP Package Manager software.
<BR> &nbsp;</DD>
<DT><A HREF="http://www.debian.org/devel/">http://www.debian.org/devel/</A>
</DT>
<DD>Debian Developers' Corner
<BR>&nbsp;</DD>
<DT><A HREF="http://techpubs.sgi.com/">http://techpubs.sgi.com/</A></DT>
<DD>IRIX Documentation On-Line
<BR>&nbsp;</DD>
<DT><A HREF="http://www.rpm.org/">http://www.rpm.org/</A></DT>
<DD>The RedHat Package Manager home page.
<BR>&nbsp;</DD>
<DT><A HREF="http://docs.sun.com/">http://docs.sun.com/</A></DT>
<DD>Solaris Documentation On-Line
<BR>&nbsp;</DD>
</DL>
</UL>
<HR>
<H1 ALIGN="RIGHT"><A NAME="INTRO">1 - Introduction to EPM</A></H1>
<P>This chapter provides an introduction to the ESP Package Manager
 (&quot;EPM&quot;).</P>
<H2><A NAME="2_1">What is EPM?</A></H2>
<P>Software distribution under UNIX/Linux can be a challenge, especially
 if you ship software for more than one operating system. Every
 operating system provides its own software packaging tools and each has
 unique requirements or implications for the software development
 environment.</P>
<P>The ESP Package Manager (&quot;EPM&quot;) is one solution to this problem.
 Besides its own &quot;portable&quot; distribution format, EPM also supports the
 generation of several vendor-specific formats. This allows you to build
 software distribution files for almost any UNIX/Linux operating system
 from the same sources.</P>
<H2><A NAME="2_2">History and Evolution</A></H2>
<P>When Easy Software Products was founded in 1993, we originally
 shipped software only for the SGI IRIX operating system. In 1997 we
 added support for Solaris, which was quickly followed by HP-UX support
 in 1998.</P>
<P>Each new operating system and supported processor required a new set
 of packaging files. While this worked, it also meant that we had to
 keep all of the packaging files synchronized manually. Needless to say,
 this process was far from perfect and we had more than one distribution
 that was not identical on all operating systems.</P>
<P>As we began developing the Common UNIX Printing System (<A HREF="http://www.cups.org/">
http://www.cups.org/</A>) in 1998, our initial goal was to add support
 for two additional operating systems: Linux and Compaq Tru64 UNIX. If
 we wanted to avoid the mistakes of the past, we clearly had to change
 how we produced software distributions.</P>
<P>The first version of EPM was released in 1999 and supported so-called
 &quot;portable&quot; software distributions that were not tied to any particular
 operating system or packaging software. Due to popular demand, we added
 support for vendor-specific packaging formats in the second major
 release of EPM, allowing the generation of portable or &quot;native&quot;
 distributions from one program and one set of software distribution
 files.</P>
<H2><A NAME="2_3">Existing Software Packaging Systems</A></H2>
<P>As we looked for a solution to our problem, we naturally investigated
 the existing open-source packaging systems. Under Linux, we looked at
 the RedHat Package Manager (&quot;RPM&quot;) and Debian packaging software
 (&quot;dpkg&quot; and &quot;dselect&quot;). For the commercial UNIX's we looked at the
 vendor-supplied packaging systems. Table 1.1 shows the results of our
 investigation.</P>
<P></P>
<TABLE ALIGN="CENTER" BORDER="1"><CAPTION><A NAME="TABLE_1_1"> Table
 1.1: Software Packaging Formats</A></CAPTION>
<TR><TH><SMALL>Format</SMALL></TH><TH><SMALL>Operating Systems<SUP>1</SUP>
</SMALL></TH><TH><SMALL>Binaries?</SMALL></TH><TH><SMALL>Cross-
 Platform?</SMALL></TH><TH><SMALL>Patches?</SMALL></TH><TH><SMALL>
Upgrades?</SMALL></TH><TH><SMALL>Conflicts?</SMALL></TH><TH><SMALL>
Requires?</SMALL></TH><TH><SMALL>Replaces?</SMALL></TH><TH><SMALL>Config
 Files?</SMALL></TH><TH><SMALL>Map Files?</SMALL></TH></TR>
<TR><TD>installp</TD><TD>AIX</TD><TD>Yes</TD><TD>No</TD><TD>No</TD><TD>
No</TD><TD>Yes</TD><TD>Yes</TD><TD>No</TD><TD>No</TD><TD>No</TD></TR>
<TR><TD>pkg_add</TD><TD>FreeBSD
<BR> NetBSD
<BR> OpenBSD</TD><TD>Yes</TD><TD>Yes<SUP>2</SUP></TD><TD>No</TD><TD>No</TD><TD>
Yes</TD><TD>Yes</TD><TD>No</TD><TD>No</TD><TD>No</TD></TR>
<TR><TD>dpkg</TD><TD>Corel Linux
<BR> Debian GNU/Linux</TD><TD>Yes</TD><TD>Yes<SUP>2</SUP></TD><TD>No</TD><TD>
Yes</TD><TD>Yes</TD><TD>Yes</TD><TD>Yes</TD><TD>Yes</TD><TD>No</TD></TR>
<TR><TD>swinstall</TD><TD>HP-UX</TD><TD>Yes</TD><TD>No</TD><TD>Yes</TD><TD>
Yes</TD><TD>Yes</TD><TD>Yes</TD><TD>No</TD><TD>Yes</TD><TD>Yes</TD></TR>
<TR><TD>inst</TD><TD>IRIX</TD><TD>Yes</TD><TD>No</TD><TD>Yes</TD><TD>Yes</TD><TD>
Yes</TD><TD>Yes</TD><TD>Yes</TD><TD>Yes</TD><TD>Yes</TD></TR>
<TR><TD>pkgadd</TD><TD>Solaris</TD><TD>Yes</TD><TD>No</TD><TD>Yes</TD><TD>
No</TD><TD>Yes</TD><TD>Yes</TD><TD>No</TD><TD>Yes</TD><TD>Yes</TD></TR>
<TR><TD>rpm</TD><TD>Mandrake
<BR> RedHat
<BR> SuSE
<BR> TurboLinux</TD><TD>Yes</TD><TD>Yes<SUP>2</SUP></TD><TD>No</TD><TD>
Yes</TD><TD>Yes</TD><TD>Yes</TD><TD>No</TD><TD>Yes</TD><TD>No</TD></TR>
<TR><TD>setld</TD><TD>Tru64 UNIX</TD><TD>Yes</TD><TD>No</TD><TD>No</TD><TD>
No</TD><TD>Yes</TD><TD>Yes</TD><TD>No</TD><TD>No</TD><TD>No</TD></TR>
</TABLE>
<OL>
<LI>Standard packaging system for named operating systems.</LI>
<LI>These packaging systems are cross-platform but require the package
 management utilities to be installed on the platform before installing
 the package.</LI>
</OL>
<P>As you can see, none of the formats supported every feature we were
 looking for. One common fault of all these formats is that they do not
 support a common software specification file format. That is, making a
 Debian software distribution requires significantly different support
 files than required for a Solaris pkg distribution. This makes it
 extremely difficult to manage distributions for multiple operating
 systems.</P>
<P>All of the package formats support binary distributions. The RPM and
 Debian formats also support source distributions that specifically
 allow for recompilation and installation. Only the commercial UNIX
 formats support patch distributions - you have to completely upgrade a
 software package with RPM and Debian. All but the Solaris pkg format
 allow you to upgrade a package without removing the old version first.</P>
<P>When building the software packages, RPM and Debian force you to
 create the actual directories, copy the files to those directories, and
 set the ownerships and permissions. You essentially are creating a
 directory for your software that can be archived in the corresponding
 package format. To ensure that all file permissions and ownerships are
 correct, you must build the distribution as the root user or use the <CODE>
fakeroot</CODE> software, introducing potential security risks and
 violating many corporate security policies. It can also make building
 distributions difficult when dynamic data such as changing data files
 or databases is involved.</P>
<P>The commercial UNIX formats use software list files that map source
 files to the correct directories and permissions. This allows for
 easier delivery of dynamic data, configuration management of what each
 distribution actually contains, and eliminates security issues with
 special permissions and building distributions as the root user. Using
 the proprietary format also has the added benefit of allowing for
 software patches and using the familiar software installation tools for
 that operating system. The primary disadvantage is that the same
 distributions and packaging software cannot be used on other operating
 systems.</P>
<H2><A NAME="2_4">Design Goals of EPM</A></H2>
<P>EPM was designed from the beginning to build binary software
 distributions using a common software specification format. The same
 distribution files work for all operating systems and all distribution
 formats. Supporting source code distributions was not a goal since most
 RPM and Debian source distributions are little more than wrapping
 around a compressed tar file containing the source files and a
 configure script.</P>
<P>Over the years, additional features have made their way into EPM to
 support more advanced software packages. Whenever possible, EPM
 emulates a feature if the vendor packager does not support it natively.</P>
<H2><A NAME="2_5">Resources</A></H2>
<P>The EPM web site provides access to the current software and
 documentation for EPM:</P>
<UL>
<PRE>
<A HREF="http://www.easysw.com/epm/">http://www.easysw.com/epm/</A>
</PRE>
</UL>
<P>The EPM source code can be downloaded in compressed tar files or via
 the popular CVS software. Please see the EPM web site for complete
 instructions.</P>
<P>The Easy Software Products news server provides several newsgroups
 for EPM. You can access it at:</P>
<UL>
<PRE>
<A HREF="news://news.easysw.com">news.easysw.com</A>
</PRE>
</UL>
<P>Commercial support for EPM is available from Easy Software Products
 and is one way to contribute to the continued development of EPM. The
 other way to contribute is by donating code, examples, and bug fixes.
 If you have adapted EPM for another operating system or have added a
 new feature that you feel will be generally useful, please contribute
 it!</P>
<HR>
<H1 ALIGN="RIGHT"><A NAME="BUILDING">2 - Building EPM</A></H1>
<P>This chapter shows how to configure, build, and install the ESP
 Package Manager.</P>
<H2><A NAME="3_1">Requirements</A></H2>
<P>EPM requires very little pre-installed software to work. Most items
 will likely be provided as part of your OS. Your development system
 will need a C compiler, the <CODE>make(1)</CODE> program (GNU, BSD, and
 most vendor <CODE>make</CODE> programs should work), the Bourne (or
 Korn or Bash) shell (<CODE>sh(1)</CODE>), and <CODE>gzip(1)</CODE>.</P>
<P>The optional graphical setup program requires a C++ compiler, the X11
 libraries, and the FLTK library. FLTK is available at the following
 URL:</P>
<UL>
<PRE>
<A HREF="http://www.fltk.org/">http://www.fltk.org/</A>
</PRE>
</UL>
<P>Your end-user systems will require the Bourne (or Korn or Bash) shell
 (<CODE>sh</CODE>), the <CODE>df(1)</CODE> program, the <CODE>tar(1)</CODE>
 program, and the <CODE>gzip(1)</CODE> program to install portable
 distributions. All but the last are standard items, and most vendors
 include <CODE>gzip</CODE> as well.</P>
<BLOCKQUOTE><B>Note:</B>
<BR>
<BR> The <CODE>gzip</CODE> program is only required to uncompress the
 software distribution<VAR> .tar.gz</VAR> file. If you supply the
 uncompressed<VAR> .tar</VAR> file or its contents, then <CODE>gzip</CODE>
 is not required on the end-user system.</BLOCKQUOTE>
<P>EPM can also generate vendor-specific distributions. These require
 the particular vendor tool, such as <CODE>rpm(8)</CODE> and <CODE>
dpkg(8)</CODE>, to generate the software distribution on the development
 system and load the software distribution on the end-user system.</P>
<H2><A NAME="3_2">Configuring the Software</A></H2>
<P>EPM uses GNU <CODE>autoconf(1)</CODE> to configure itself for your
 system. The <CODE>configure</CODE> script is used to configure the EPM
 software, as follows:</P>
<UL>
<PRE>
<KBD>./configure ENTER</KBD>
</PRE>
</UL>
<H3>Choosing Compilers</H3>
<P>If the <CODE>configure</CODE> script is unable to determine the name
 of your C or C++ compiler, set the <CODE>CC</CODE> and <CODE>CXX</CODE>
 environment variables to point to the C and C++ compiler programs,
 respectively. You can set these variables using the following commands
 in the Bourne, Korn, or Bash shells:</P>
<UL>
<PRE>
<KBD>export CC=/foo/bar/gcc ENTER
export CXX=/foo/bar/gcc ENTER</KBD>
</PRE>
</UL>
<P>If you are using C shell or TCsh, use the following commands instead:</P>
<UL>
<PRE>
<KBD>setenv CC /foo/bar/gcc ENTER
setenv CXX /foo/bar/gcc ENTER</KBD>
</PRE>
</UL>
<P>Run the <CODE>configure</CODE> script again to use the new commands.</P>
<H3>Choosing Installation Directories</H3>
<P>The default installation prefix is<VAR> /usr</VAR>, which will place
 the EPM programs in<VAR> /usr/bin</VAR>, the setup GUI in<VAR>
 /usr/lib/epm</VAR>, and the man pages in<VAR> /usr/man</VAR>. Use the <CODE>
--prefix</CODE> option to relocate these files to another directory:</P>
<UL>
<PRE>
<KBD>./configure --prefix=/usr/local ENTER</KBD>
</PRE>
</UL>
<P>The <CODE>configure</CODE> script also accepts the <CODE>--bindir</CODE>
, <CODE>--libdir</CODE>, and <CODE>--mandir</CODE> options to relocate
 each directory separately, as follows:</P>
<UL>
<PRE>
<KBD>./configure --bindir=/usr/local/bin --libdir=/usr/local/lib \
    --mandir=/usr/local/share/man ENTER</KBD>
</PRE>
</UL>
<H3>Options for the Setup GUI</H3>
<P>The setup GUI requires the X11 and FLTK libraries. If these libraries
 are not provided in standard locations, then the <CODE>
--with-x-includes</CODE>, <CODE>--with-x-libs</CODE>, <CODE>
--with-fltk-includes</CODE>, and <CODE>--with-fltk-libs</CODE> options
 can be used to tell the <CODE>configure</CODE> script where to find
 them, as follows:</P>
<UL>
<PRE>
<KBD>./configure --with-x-includes=/usr/X11R6/include \
    --with-x-libs=/usr/X11R6/lib \
    --with-fltk-includes=/usr/local/include \
    --with-fltk-libs=/usr/local/lib ENTER</KBD>
</PRE>
</UL>
<H2><A NAME="3_3">Building the Software</A></H2>
<P>Once you have configured the software, type the following command to
 compile it:</P>
<UL>
<PRE>
<KBD>make ENTER</KBD>
</PRE>
</UL>
<P>Compilation should take a few minutes at most. Then type the
 following command to determine if the software compiled successfully:</P>
<UL>
<PRE>
<KBD>make test ENTER</KBD>
Portable distribution build test PASSED.
Native distribution build test PASSED.
</PRE>
</UL>
<P>The <CODE>test</CODE> target builds a portable and native
 distribution of EPM and reports if the two distributions were generated
 successfully.</P>
<H2><A NAME="3_4">Installing the Software</A></H2>
<P>Now that you have compiled and tested the software, you can install
 it using the <CODE>make</CODE> command or one of the distributions that
 was created. You should be logged in as the super-user unless you
 specified installation directories for which you have write permission.
 The <CODE>su(8)</CODE> command is usually sufficient to install
 software:</P>
<UL>
<PRE>
<KBD>su ENTER</KBD>
</PRE>
</UL>
<H3>Installing Using the <CODE>make</CODE> Command</H3>
<P>Type the following command to install the EPM software using the <CODE>
make</CODE> command:</P>
<UL>
<PRE>
<KBD>make install ENTER</KBD>
Installing EPM setup in /usr/lib/epm
Installing EPM programs in /usr/bin
Installing EPM manpages in /usr/man/cat1 and /usr/man/man1
Installing EPM documentation in /usr/share/doc/epm
</PRE>
</UL>

<!-- NEW PAGE -->
<H3>Installing Using the Portable Distribution</H3>
<P>The portable distribution can be found in a subdirectory named using
 the operating system, version, and architecture. For example, the
 subdirectory for a Linux 2.4.x system on an Intel-based system would be<VAR>
 linux-2.4-intel</VAR>. The subdirectory name is built from the
 following template:</P>
<UL>
<PRE>
<I>os-major.minor-architecture</I>
</PRE>
</UL>
<P>The <CODE>os</CODE> name is the common name for the operating system.
 Table 2.1 lists the abbreviations for most operating systems:</P>
<CENTER>
<TABLE BORDER><CAPTION><A NAME="TABLE_2_1"> Table 2.1: Operating System
 Name Abbreviations</A></CAPTION>
<TR><TH>Operating System</TH><TH>Name</TH></TR>
<TR><TD>AIX</TD><TD><CODE>aix</CODE></TD></TR>
<TR><TD>Compaq Tru64 UNIX
<BR> Digital UNIX
<BR> OSF/1</TD><TD><CODE>tru64</CODE></TD></TR>
<TR><TD>FreeBSD</TD><TD><CODE>freebsd</CODE></TD></TR>
<TR><TD>HP-UX</TD><TD><CODE>hpux</CODE></TD></TR>
<TR><TD>IRIX</TD><TD><CODE>irix</CODE></TD></TR>
<TR><TD>Linux</TD><TD><CODE>linux</CODE></TD></TR>
<TR><TD>NetBSD</TD><TD><CODE>netbsd</CODE></TD></TR>
<TR><TD>OpenBSD</TD><TD><CODE>openbsd</CODE></TD></TR>
<TR><TD>Solaris</TD><TD><CODE>solaris</CODE></TD></TR>
</TABLE>
</CENTER>
<P>The <CODE>major.minor</CODE> string is the operating system version
 number. Any patch revision information is stripped from the version
 number, as are leading characters before the major version number. For
 example, HP-UX version B.11.11 will result in a version number string
 of <CODE>11.11</CODE>.</P>
<P>The <CODE>architecture</CODE> string identifies the target processor.
 Table 2.2 lists the supported processors:</P>
<CENTER>
<TABLE BORDER><CAPTION><A NAME="TABLE_2_2"> Table 2.2: Processor
 Architecture Abbreviations</A></CAPTION>
<TR><TH>Processor(s)</TH><TH>Abbreviation</TH></TR>
<TR><TD>Compaq Alpha</TD><TD><CODE>alpha</CODE></TD></TR>
<TR><TD>HP Precision Architecture</TD><TD><CODE>hppa</CODE></TD></TR>
<TR><TD>INTEL 80x86</TD><TD><CODE>intel</CODE></TD></TR>
<TR><TD>MIPS RISC</TD><TD><CODE>mips</CODE></TD></TR>
<TR><TD>IBM Power PC</TD><TD><CODE>powerpc</CODE></TD></TR>
<TR><TD>SPARC
<BR> MicroSPARC
<BR> UltraSPARC</TD><TD><CODE>sparc</CODE></TD></TR>
</TABLE>
</CENTER>
<P>Once you have determined the subdirectory containing the
 distribution, type the following commands to install EPM from the
 portable distribution:</P>
<UL>
<PRE>
<KBD>cd <I>os-major.minor-architecture<I> ENTER
./epm.install ENTER</I></I></KBD>
</PRE>
</UL>
<P>The software will be installed after answering a few yes/no
 questions.</P>

<!-- NEW PAGE -->
<H3>Installing Using the Native Distribution</H3>
<P>The <CODE>test</CODE> target also builds a distribution in the native
 operating system format, if supported. Table 2.3 lists the native
 formats for each supported operating system and the command to run to
 install the software.</P>
<CENTER>
<TABLE BORDER><CAPTION><A NAME="TABLE_2_3"> Table 2.3: Native Operating
 System Formats</A></CAPTION>
<TR><TH>Operating System</TH><TH>Format</TH><TH>Command</TH></TR>
<TR><TD>AIX</TD><TD><CODE>aix</CODE></TD><TD NOWRAP><CODE>installp -d<I>
directory</I> epm</CODE></TD></TR>
<TR><TD>Compaq Tru64 UNIX
<BR> Digital UNIX
<BR> OSF/1</TD><TD><CODE>setld</CODE></TD><TD NOWRAP><CODE>setld -a<I>
 directory</I>???</CODE></TD></TR>
<TR><TD>FreeBSD
<BR> NetBSD
<BR> OpenBSD</TD><TD><CODE>bsd</CODE></TD><TD NOWRAP><CODE>cd<I>
 directory</I>
<BR> pkg_add epm</CODE></TD></TR>
<TR><TD>HP-UX</TD><TD><CODE>depot</CODE></TD><TD NOWRAP><CODE>swinstall
 -f<I> directory</I></CODE></TD></TR>
<TR><TD>IRIX</TD><TD><CODE>inst</CODE></TD><TD NOWRAP><CODE>swmgr -f<I>
 directory</I></CODE></TD></TR>
<TR><TD>Linux</TD><TD><CODE>rpm</CODE></TD><TD NOWRAP><CODE>rpm -i<I>
 directory</I>/epm-3.0.rpm</CODE></TD></TR>
<TR><TD>Solaris</TD><TD><CODE>pkg</CODE></TD><TD NOWRAP><CODE>pkgadd -d<I>
 directory</I> epm</CODE></TD></TR>
</TABLE>
</CENTER>
<HR>
<H1 ALIGN="RIGHT"><A NAME="PACKAGING">Packaging Your Software with EPM</A>
</H1>
<P>This chapter describes how to use EPM to package your own software
 packages.</P>
<H2><A NAME="4_1">The Basics</A></H2>
<P>EPM reads one or more software &quot;list&quot; files that describe a single
 software package. Each list file contains one or more lines of ASCII
 text containing product or file information. Comments start with the <CODE>
#</CODE> character, directives start with the <CODE>%</CODE> character,
 variable start with the <CODE>$</CODE> character, and files,
 directories, and symlinks start with a letter.</P>
<H3>Product Information</H3>
<P>Every list file needs to define the product name, copyright,
 description, license, README file, vendor, and version:</P>
<UL>
<PRE>
%product Kung Foo Firewall
%copyright 1999-2001 by Foo Industries, All Rights Reserved.
%vendor Foo Industries
%license COPYING
%readme README
%description Kung Foo firewall software for your firewall.
%version 1.2.3p4 1020304
</PRE>
</UL>
<P>The <CODE>%license</CODE> and <CODE>%readme</CODE> directives specify
 files for the license agreement and README files for the package,
 respectively.</P>
<P>The <CODE>%product</CODE>, <CODE>%copyright</CODE>, <CODE>%vendor</CODE>
, and <CODE>%description</CODE> directives take text directly from the
 line.</P>
<P>The <CODE>%version</CODE> directive specifies the version numbers of
 the package. The first number is the human-readable version number,
 while the second number is the integer version number. If you omit the
 integer version number, EPM will calculate one for you.</P>
<H3>Files, Directories, and Symlinks</H3>
<P>Each file in the distribution is listed on a line starting with a
 letter. The format of all lines is:</P>
<UL>
<PRE>
type mode owner group destination source
</PRE>
</UL>
<P>Regular files use the letter <CODE>f</CODE> for the type field:</P>
<UL>
<PRE>
f 755 root sys /usr/bin/foo foo
</PRE>
</UL>
<P>Configuration files use the letter <CODE>c</CODE> for the type field:</P>
<UL>
<PRE>
c 644 root sys /etc/foo.conf foo.conf
</PRE>
</UL>
<P>Directories use the letter <CODE>d</CODE> for the type field and use
 a source path of &quot;-&quot;:</P>
<UL>
<PRE>
d 755 root sys /var/spool/foo -
</PRE>
</UL>
<P>Finally, symbolic links use the letter <CODE>l</CODE> (lowercase L)
 for the type field:</P>
<UL>
<PRE>
l 000 root sys /usr/bin/foobar foo
</PRE>
</UL>
<P>The source field specifies the file to link to and can be a relative
 path.</P>
<H3>Wildcards</H3>
<P>Wildcard patterns can be used in the source field to include multiple
 files on a single line:</P>
<UL>
<PRE>
f 0444 root sys /usr/share/doc/foo *.html
</PRE>
</UL>
<H2><A NAME="4_2">Building a Software Distribution</A></H2>
<P>The <CODE>epm(1)</CODE> program is used to build software
 distributions from list files. To build a portable software
 distribution for an application called &quot;foo&quot;, type the following
 command:</P>
<UL>
<PRE>
<KBD>epm foo <I>ENTER</I></KBD>
</PRE>
</UL>
<P>If your application uses a different base name than the list file,
 you can specify the list filename on the command-line as well:</P>
<UL>
<PRE>
<KBD>epm foo bar.list <I>ENTER</I></KBD>
</PRE>
</UL>
<P>EPM can also produce vendor-specific distributions using the <CODE>-f</CODE>
 option:</P>
<UL>
<PRE>
<KBD>epm -f format foo bar.list <I>ENTER</I></KBD>
</PRE>
</UL>
<P>The<I> format</I> option can be one of the following keywords:</P>
<UL>
<LI><CODE>aix</CODE> - AIX software distribution.</LI>
<LI><CODE>bsd</CODE> - FreeBSD, NetBSD, or OpenBSD software
 distribution.</LI>
<LI><CODE>depot</CODE> or <CODE>swinstall</CODE> - HP-UX software
 distribution.</LI>
<LI><CODE>dpkg</CODE> - Debian software distribution.</LI>
<LI><CODE>inst</CODE> or <CODE>tardist</CODE> - IRIX software
 distribution.</LI>
<LI><CODE>native</CODE> - &quot;Native&quot; software distribution (RPM, INST,
 DEPOT, PKG, etc.) for the platform.</LI>
<LI><CODE>pkg</CODE> - Solaris software distribution.</LI>
<LI><CODE>portable</CODE> - Portable software distribution (default).</LI>
<LI><CODE>rpm</CODE> - RedHat software distribution.</LI>
<LI><CODE>setld</CODE> - Tru64 (setld) software distribution.</LI>
</UL>
<P>Everything in the software list file stays the same - you just use
 the <CODE>-f</CODE> option to select the format. For example, to build
 an RPM distribution of EPM, type:</P>
<UL>
<PRE>
epm -f rpm epm
</PRE>
</UL>
<P>The result will be an RPM distribution file instead of the portable
 distribution file.</P>
<H2><A NAME="4_3">Installing the Software Package</A></H2>
<P>Once you have created the software distribution, you can install it.
 Portable distributions create an install script called<VAR>
 product.install</VAR>, where &quot;product&quot; is the name of the package:</P>
<UL>
<PRE>
<KBD>cd os-release-arch <I>ENTER</I>
./product.install <I>ENTER</I></KBD>
</PRE>
</UL>
<P>After answering a few yes/no questions, the software will be
 installed. To bypass the questions, run the script with the <CODE>now</CODE>
 argument:</P>
<UL>
<PRE>
<KBD>cd os-release-arch <I>ENTER</I>
./product.install now <I>ENTER</I></KBD>
</PRE>
</UL>
<H2><A NAME="4_4">Including the Setup GUI</A></H2>
<P>EPM also provides an optional graphical setup program. To include the
 setup program in your distributions, create a product logo image in XPM
 format and use the <CODE>--setup-image</CODE> option when creating your
 distribution:</P>
<UL>
<PRE>
<KBD>epm --setup-image foo.xpm foo <I>ENTER</I></KBD>
</PRE>
</UL>
<HR>
<H1 ALIGN="RIGHT"><A NAME="ADVANCED">Advanced Packaging with EPM</A></H1>
<P>This chapter describes the advanced packaging features of EPM.</P>
<H2><A NAME="5_1">Including Other List Files</A></H2>
<P>The <CODE>%include</CODE> directive includes another list file:</P>
<UL>
<PRE>
%include filename
</PRE>
</UL>
<P>Includes can be nested, usually up to 250 levels (depends on the host
 operating system and libraries.)</P>
<H2><A NAME="5_2">Conflicts, Replaces, and Requires</A></H2>
<P>Software conflicts and requirements are specified using the <CODE>
%incompat</CODE> and <CODE>%requires</CODE> directives. If your software
 replaces another package, you can specify that using the <CODE>
%replaces</CODE> directive (<CODE>%replaces</CODE> is silently mapped to
 <CODE>%conflicts</CODE> when the distribution format does not support
 package replacement.)</P>
<P>Dependencies are specified using the package name and optionally the
 lower and upper version numbers:</P>
<UL>
<PRE>
%requires foobar
%requires foobar 1.0
%incompat foobar
%incompat foobar 0.9
%replaces foobar
%replaces foobar 1.2 3.4
</PRE>
</UL>
<P>or the filename:</P>
<UL>
<PRE>
%requires /usr/lib/libfoobar.so
%incompat /usr/lib/libfoobar.so.1.2
</PRE>
</UL>
<P>Package dependencies are currently enforced only for the same package
 format, so a portable distribution that requires package &quot;foobar&quot; will
 only look for an installed &quot;foobar&quot; package in portable format.</P>
<P>Filename dependencies are only supported by the Debian, portable, and
 RPM distribution formats.</P>
<H2><A NAME="5_3">Scripts</A></H2>
<P>Bourne shell script commands can be executed before or after
 installation, patching, or removal of the software. The <CODE>
%preinstall</CODE> and <CODE>%postinstall</CODE> directives specify
 commands to be run before and after installation, respectively:</P>
<UL>
<PRE>
%preinstall echo Command before installing
%postinstall echo Command after installing
</PRE>
</UL>
<P>Similarly, the <CODE>%prepatch</CODE> and <CODE>%postpatch</CODE>
 directives specify commands to be executed before and after patching
 the software:</P>
<UL>
<PRE>
%prepatch echo Command before patching
%postpatch echo Command after patching
</PRE>
</UL>
<P>Finally, the <CODE>%preremove</CODE> and <CODE>%postremove</CODE>
 directives specify commands that are run before and after removal of
 the software:</P>
<UL>
<PRE>
%preremove echo Command before removing
%postremove echo Command after removing
</PRE>
</UL>
<H2><A NAME="5_4">Conditional Directives</A></H2>
<P>The <CODE>%system</CODE> directive can match or not match specific
 operating system names or versions. The operating system name is the
 name reported by <CODE>uname</CODE> in lowercase, while the operating
 system version is the major and minor version number reported by <CODE>
uname -r</CODE>:</P>
<DL>
<DT><CODE>%system irix</CODE></DT>
<DD>Only include the following files when building a distribution for
 the IRIX operating system.</DD>
<DT><CODE>%system linux-2.0</CODE></DT>
<DD>Only include the following files when building a distribution for
 Linux 2.0.x.</DD>
<DT><CODE>%system !irix !linux-2.0</CODE></DT>
<DD>Only include the following files when building a distribution for
 operating systems other than IRIX and Linux 2.0.x.</DD>
</DL>
<P>The special name <CODE>all</CODE> is used to match all operating
 systems:</P>
<UL>
<PRE>
%system all
</PRE>
</UL>
<P>For format-specific files, the <CODE>%format</CODE> directive can be
 used:</P>
<DL>
<DT><CODE>%format rpm</CODE></DT>
<DD>Only include the following files when building an RPM distribution.</DD>
<DT><CODE>%format !rpm</CODE></DT>
<DD>Only include the following files when not building an RPM
 distribution.x.</DD>
<DT><CODE>%format all</CODE></DT>
<DD>Include the following files for all types of distributions.</DD>
</DL>
<H2><A NAME="5_5">Software Patches</A></H2>
<P>EPM supports portable software patch distributions which contain only
 the differences between the original and patch release. Patch files are
 specified using uppercase letters for the affected files. In the
 following example, the files<VAR> /usr/bin/bar</VAR> and<VAR>
 /etc/foo.conf</VAR> are marked as changed since the original release:</P>
<UL>
<PRE>
f 755 root sys /usr/bin/foo foo
F 755 root sys /usr/bin/bar bar
f 755 root sys /usr/share/man/man1/foo.1 foo.man
f 755 root sys /usr/share/man/man1/bar.1 bar.man
C 644 root sys /etc/foo.conf foo.conf
</PRE>
</UL>
<H2><A NAME="5_6">Variables</A></H2>
<P>EPM imports the current environment variables for use in your list
 file. You can also define new variable in the list file or on the
 command-line when running EPM.</P>
<P>Variables are defined by starting the line with the dollar sign (<CODE>
$</CODE>) followed by the name and value:</P>
<UL>
<PRE>
$name=value
$prefix=/usr
$exec_prefix=${prefix}
$bindir=$exec_prefix/bin
</PRE>
</UL>
<P>Variable substitution is performed when the variable is defined, so
 be careful with the ordering of your variable definitions.</P>
<P>Also, any variables you specify in your list file will be overridden
 by variables defined on the command-line or in your environment, just
 like with <CODE>make</CODE>. This can be a useful feature or a curse,
 depending on your choice of variable names.</P>
<P>As you can see, variables are referenced using the dollar sign (<CODE>
$</CODE>). As with most shells, variable names can be surrounded by
 curly braces (<CODE>${variable}</CODE>) to explicitly delimit the name.</P>
<P>If you need to insert a <CODE>$</CODE> in a filename or a script, use
 <CODE>$$</CODE>:</P>
<UL>
<PRE>
%install echo Enter your name:
%install read $$name
%install echo Your name is $$name.
</PRE>
</UL>
<H2><A NAME="5_7">Init Scripts</A></H2>
<P>Initialization scripts are generally portable between platforms,
 however the location of initialization scripts varies greatly.</P>
<P>The <CODE>i</CODE> file type can be used to specify and init script
 that is to be installed on the system. EPM will then determine the
 appropriate init file directories to use and create any required
 symbolic links to support the init script:</P>
<UL>
<PRE>
i 755 root sys foo foo.sh
</PRE>
</UL>
<P>The previous example creates an init script named<VAR> foo</VAR> on
 the end-user system and will create symbolic links to run levels 0, 2,
 3, and 5 as needed.</P>
<HR>
<H1 ALIGN="RIGHT"><A NAME="LICENSE">Appendix A - GNU General Public
 License</A></H1>
<P ALIGN="CENTER">GNU GENERAL PUBLIC LICENSE
<BR> Version 2, June 1991</P>
<P ALIGN="CENTER">Copyright (C) 1989, 1991 Free Software Foundation,
 Inc.
<BR> 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA
<BR> Everyone is permitted to copy and distribute verbatim copies of
 this license document, but changing it is not allowed.</P>
<P ALIGN="CENTER"><B>GNU GENERAL PUBLIC LICENSE
<BR> TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</B></P>
<P>0. This License applies to any program or other work which contains a
 notice placed by the copyright holder saying it may be distributed
 under the terms of this General Public License. The &quot;Program&quot;, below,
 refers to any such program or work, and a &quot;work based on the Program&quot;
 means either the Program or any derivative work under copyright law:
 that is to say, a work containing the Program or a portion of it,
 either verbatim or with modifications and/or translated into another
 language. (Hereinafter, translation is included without limitation in
 the term &quot;modification&quot;.) Each licensee is addressed as &quot;you&quot;.</P>
<P>Activities other than copying, distribution and modification are not
 covered by this License; they are outside its scope. The act of running
 the Program is not restricted, and the output from the Program is
 covered only if its contents constitute a work based on the Program
 (independent of having been made by running the Program). Whether that
 is true depends on what the Program does.</P>
<P>1. You may copy and distribute verbatim copies of the Program's
 source code as you receive it, in any medium, provided that you
 conspicuously and appropriately publish on each copy an appropriate
 copyright notice and disclaimer of warranty; keep intact all the
 notices that refer to this License and to the absence of any warranty;
 and give any other recipients of the Program a copy of this License
 along with the Program.</P>
<P>You may charge a fee for the physical act of transferring a copy, and
 you may at your option offer warranty protection in exchange for a fee.</P>
<P>2. You may modify your copy or copies of the Program or any portion
 of it, thus forming a work based on the Program, and copy and
 distribute such modifications or work under the terms of Section 1
 above, provided that you also meet all of these conditions:</P>
<UL>
<P>a. You must cause the modified files to carry prominent notices
 stating that you changed the files and the date of any change.</P>
<P>b. You must cause any work that you distribute or publish, that in
 whole or in part contains or is derived from the Program or any part
 thereof, to be licensed as a whole at no charge to all third parties
 under the terms of this License.</P>
<P>c. If the modified program normally reads commands interactively when
 run, you must cause it, when started running for such interactive use
 in the most ordinary way, to print or display an announcement including
 an appropriate copyright notice and a notice that there is no warranty
 (or else, saying that you provide a warranty) and that users may
 redistribute the program under these conditions, and telling the user
 how to view a copy of this License. (Exception: if the Program itself
 is interactive but does not normally print such an announcement, your
 work based on the Program is not required to print an announcement.)</P>
</UL>
<P>These requirements apply to the modified work as a whole. If
 identifiable sections of that work are not derived from the Program,
 and can be reasonably considered independent and separate works in
 themselves, then this License, and its terms, do not apply to those
 sections when you distribute them as separate works. But when you
 distribute the same sections as part of a whole which is a work based
 on the Program, the distribution of the whole must be on the terms of
 this License, whose permissions for other licensees extend to the
 entire whole, and thus to each and every part regardless of who wrote
 it.</P>
<P>Thus, it is not the intent of this section to claim rights or contest
 your rights to work written entirely by you; rather, the intent is to
 exercise the right to control the distribution of derivative or
 collective works based on the Program.</P>
<P>In addition, mere aggregation of another work not based on the
 Program with the Program (or with a work based on the Program) on a
 volume of a storage or distribution medium does not bring the other
 work under the scope of this License.</P>
<P>3. You may copy and distribute the Program (or a work based on it,
 under Section 2) in object code or executable form under the terms of
 Sections 1 and 2 above provided that you also do one of the following:</P>
<UL>
<P>a. Accompany it with the complete corresponding machine-readable
 source code, which must be distributed under the terms of Sections 1
 and 2 above on a medium customarily used for software interchange; or,</P>
<P>b. Accompany it with a written offer, valid for at least three years,
 to give any third party, for a charge no more than your cost of
 physically performing source distribution, a complete machine-readable
 copy of the corresponding source code, to be distributed under the
 terms of Sections 1 and 2 above on a medium customarily used for
 software interchange; or,</P>
<P>c. Accompany it with the information you received as to the offer to
 distribute corresponding source code. (This alternative is allowed only
 for noncommercial distribution and only if you received the program in
 object code or executable form with such an offer, in accord with
 Subsection b above.)</P>
</UL>
<P>The source code for a work means the preferred form of the work for
 making modifications to it. For an executable work, complete source
 code means all the source code for all modules it contains, plus any
 associated interface definition files, plus the scripts used to control
 compilation and installation of the executable. However, as a special
 exception, the source code distributed need not include anything that
 is normally distributed (in either source or binary form) with the
 major components (compiler, kernel, and so on) of the operating system
 on which the executable runs, unless that component itself accompanies
 the executable.</P>
<P>If distribution of executable or object code is made by offering
 access to copy from a designated place, then offering equivalent access
 to copy the source code from the same place counts as distribution of
 the source code, even though third parties are not compelled to copy
 the source along with the object code.</P>
<P>4. You may not copy, modify, sublicense, or distribute the Program
 except as expressly provided under this License. Any attempt otherwise
 to copy, modify, sublicense or distribute the Program is void, and will
 automatically terminate your rights under this License. However,
 parties who have received copies, or rights, from you under this
 License will not have their licenses terminated so long as such parties
 remain in full compliance.</P>
<P>5. You are not required to accept this License, since you have not
 signed it. However, nothing else grants you permission to modify or
 distribute the Program or its derivative works. These actions are
 prohibited by law if you do not accept this License. Therefore, by
 modifying or distributing the Program (or any work based on the
 Program), you indicate your acceptance of this License to do so, and
 all its terms and conditions for copying, distributing or modifying the
 Program or works based on it.</P>
<P>6. Each time you redistribute the Program (or any work based on the
 Program), the recipient automatically receives a license from the
 original licensor to copy, distribute or modify the Program subject to
 these terms and conditions. You may not impose any further restrictions
 on the recipients' exercise of the rights granted herein. You are not
 responsible for enforcing compliance by third parties to this License.</P>
<P>7. If, as a consequence of a court judgment or allegation of patent
 infringement or for any other reason (not limited to patent issues),
 conditions are imposed on you (whether by court order, agreement or
 otherwise) that contradict the conditions of this License, they do not
 excuse you from the conditions of this License. If you cannot
 distribute so as to satisfy simultaneously your obligations under this
 License and any other pertinent obligations, then as a consequence you
 may not distribute the Program at all. For example, if a patent license
 would not permit royalty-free redistribution of the Program by all
 those who receive copies directly or indirectly through you, then the
 only way you could satisfy both it and this License would be to refrain
 entirely from distribution of the Program.</P>
<P>If any portion of this section is held invalid or unenforceable under
 any particular circumstance, the balance of the section is intended to
 apply and the section as a whole is intended to apply in other
 circumstances.</P>
<P>It is not the purpose of this section to induce you to infringe any
 patents or other property right claims or to contest validity of any
 such claims; this section has the sole purpose of protecting the
 integrity of the free software distribution system, which is
 implemented by public license practices. Many people have made generous
 contributions to the wide range of software distributed through that
 system in reliance on consistent application of that system; it is up
 to the author/donor to decide if he or she is willing to distribute
 software through any other system and a licensee cannot impose that
 choice.</P>
<P>This section is intended to make thoroughly clear what is believed to
 be a consequence of the rest of this License.</P>
<P>8. If the distribution and/or use of the Program is restricted in
 certain countries either by patents or by copyrighted interfaces, the
 original copyright holder who places the Program under this License may
 add an explicit geographical distribution limitation excluding those
 countries, so that distribution is permitted only in or among countries
 not thus excluded. In such case, this License incorporates the
 limitation as if written in the body of this License.</P>
<P>9. The Free Software Foundation may publish revised and/or new
 versions of the General Public License from time to time. Such new
 versions will be similar in spirit to the present version, but may
 differ in detail to address new problems or concerns.</P>
<P>Each version is given a distinguishing version number. If the Program
 specifies a version number of this License which applies to it and &quot;any
 later version&quot;, you have the option of following the terms and
 conditions either of that version or of any later version published by
 the Free Software Foundation. If the Program does not specify a version
 number of this License, you may choose any version ever published by
 the Free Software Foundation.</P>
<P>10. If you wish to incorporate parts of the Program into other free
 programs whose distribution conditions are different, write to the
 author to ask for permission. For software which is copyrighted by the
 Free Software Foundation, write to the Free Software Foundation; we
 sometimes make exceptions for this. Our decision will be guided by the
 two goals of preserving the free status of all derivatives of our free
 software and of promoting the sharing and reuse of software generally.</P>
<P ALIGN="CENTER"><B>NO WARRANTY</B></P>
<P>11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO
 WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.
 EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR
 OTHER PARTIES PROVIDE THE PROGRAM &quot;AS IS&quot; WITHOUT WARRANTY OF ANY KIND,
 EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE
 ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH
 YOU. SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL
 NECESSARY SERVICING, REPAIR OR CORRECTION.</P>
<P>12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN
 WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY
 AND/OR REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU
 FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR
 CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE
 PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING
 RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A
 FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS), EVEN IF
 SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
 DAMAGES.</P>
<P ALIGN="CENTER"><B>END OF TERMS AND CONDITIONS</B></P>
<HR>
<H1 ALIGN="RIGHT"><A NAME="MANPAGES">B - Command Reference</A></H1>

<!-- NEW PAGE -->
<H2><A NAME="epm">epm</A></H2>
<HR>
<P>Create software packages</P>
<H3>Synopsis</H3>
<P><B>epm</B> [ -a<I> architecture</I> ] [ -f<I> format</I> ] [ -g ] [
 -k ] [ -n[mrs] ] [ -s<I> setup.xpm</I> ] [ --setup-image<I> setup.xpm</I>
 ] [ --setup-program<I> /foo/bar/setup</I> ] [ --setup-types<I>
 setup.types</I> ] [ -v ] [<I> name=value name=value</I> ] product [<I>
 listfile</I> ]</P>
<H3>Description</H3>
<P><B>epm</B> generates software packages complete with installation,
 removal, and (if necessary) patch scripts. Unless otherwise specified,
 the files required for<I> product</I> are read from a file named &quot;<I>
product</I>.list&quot;.</P>
<P>The<I> -a</I> option (&quot;architecture&quot;) specifies the actual
 architecture for the software. Without this option the generic
 processor architecture is used (&quot;intel&quot;, &quot;sparc&quot;, &quot;mips&quot;, etc.)</P>
<P>The<I> -f</I> option (&quot;format&quot;) specifies the distribution format:</P>
<UL>
<DL>
<DT>aix</DT>
<DD>Generate an AIX distribution suitable for installation on an AIX
 system.</DD>
<DT>bsd</DT>
<DD>Generate a BSD distribution suitable for installation on a FreeBSD,
 NetBSD, or OpenBSD system.</DD>
<DT>deb</DT>
<DD>Generate a Debian distribution suitable for installation on a Debian
 Linux system.</DD>
<DT>inst, tardist</DT>
<DD>Generate an IRIX distribution suitable for installation on an system
 running IRIX.</DD>
<DT>native</DT>
<DD>Generate an native distribution. This uses<I> rpm</I> for Linux,<I>
 inst</I> for IRIX,<I> pkg</I> for Solaris,<I> swinstall</I> for HP-UX,
 and<I> bsd</I> for FreeBSD, NetBSD, and OpenBSD. All other operating
 systems default to the<I> portable</I> format.</DD>
<DT>pkg</DT>
<DD>Generate an ATTsoftware package. These are used primarily under
 Solaris.</DD>
<DT>portable</DT>
<DD>Generate a portable distribution based on shell scripts and tar
 files. The resulting distribution is installed and removed the same way
 on all operating systems. [default]</DD>
<DT>rpm</DT>
<DD>Generate a Red Hat Package Manager (&quot;RPM&quot;) distribution suitable for
 installation on a Red Hat Linux system.</DD>
<DT>setld</DT>
<DD>Generate a Tru64 (setld) software distribution.</DD>
<DT>swinstall, depot</DT>
<DD>Generate a HP-UX software distribution.</DD>
</DL>
</UL>
<P>Executable files in the distribution are normally stripped of
 debugging information when packaged. To disable this functionality use
 the<I> -g</I> option.</P>
<P>Intermediate (spec, etc.) files used to create the distribution are
 normally removed after the distribution is created. The<I> -k</I>
 option keeps these files in the distribution directory.</P>
<P>The<I> -s</I> and<I> --setup-image</I> options (&quot;setup&quot;) include the
 ESP Software Wizard with the specified XPM image file with the
 distribution. This option is currently only supported by portable
 distributions.</P>
<P>The<I> --setup-program</I> option specifies the setup executable to
 use with the distribution. This option is currently only supported by
 portable distributions.</P>
<P>The<I> --setup-types</I> option specifies the<VAR> setup.types</VAR>
 file to include with the distribution. This option is currently only
 supported by portable distributions.</P>
<P>The<I> -v</I> option (&quot;verbose&quot;) increases the amount of information
 that is reported. Use multiple v's for more verbose output.</P>
<P>Distributions normally are named
 &quot;product-version-system-release-machine.ext&quot; and
 &quot;product-version-system-release-machine-patch.ext&quot; (for patch
 distributions.) The &quot;system-release-machine&quot; information can be
 customized or eliminated using the<I> -n</I> option with the
 appropriate trailing letters. Using<I> -n</I> by itself will remove the
 &quot;system-release-machine&quot; string from the filename entirely.</P>
<P>Debian, IRIX, portable, and Red Hat distributions use the extensions
 &quot;.deb&quot;, &quot;.tardist&quot;, &quot;tar.gz&quot;, and &quot;.rpm&quot; respectively.</P>
<H3>List Variables</H3>
<P><I>EPM</I> maintains a list of variables and their values which can
 be used to substitute values in the list file. These variables are
 imported from the current environment and taken from the command-line
 and list file as provided. Substitutions occur when the variable name
 is referenced with the dollar sign ($):</P>
<UL>
<PRE>
%install echo What is your name:
%install read $$name
%install echo Your name is $$name
</PRE>
</UL>
<UL>
<PRE>
f 0555 root sys ${bindir}/foo foo
f 0555 root sys $datadir/foo/foo.dat foo.dat
</PRE>
</UL>
<P>Variable names can be surrounded by curley brackets (${name}) or
 alone ($name); without brackets the name is terminated by the first
 slash (/), dash (-), or whitespace. The dollar sign can be inserted
 using $$.</P>
<H3>Environment Variables</H3>
<P>The<I> RPMDIR</I> environment variable will override where EPM looks
 for RPM distributions you generate. The default locations are<VAR>
 /usr/src/redhat/RPMS, /usr/src/RPM/RPMS, /usr/src/packages/RPMS</VAR>,
 and<VAR> /usr/local/src/RPMS</VAR>.</P>
<H3>Known Bugs</H3>
<P><I>EPM</I> does not currently support generation of IRIX software
 patches.</P>
<H3>See Also</H3>
<P><A HREF="#epm">epm(1)</A> - create software packages.</P>
<P><A HREF="#epminstall">epminstall(1)</A> - add a directory, file, or
 symlink to a list file.
<BR><A HREF="#mkepmlist"> mkepmlist(1)</A> - make an epm list file from
 a directory.
<BR><A HREF="#REFERENCE"> epm.list(5)</A> - epm list file format.</P>
<A HREF="#setup"> setup(1)</A> - graphical setup program for the esp
 package manager.
<H3>Copyright</H3>
<P>Copyright 1999-2001 by Easy Software Products, All Rights Reserved.</P>
<P>This program is free software; you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation; either version 2, or (at your option) any
 later version.</P>
<P>This program is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 General Public License for more details.</P>

<!-- NEW PAGE -->
<H2><A NAME="epminstall">epminstall</A></H2>
<HR>
<P>Add a directory, file, or symlink to a list file.</P>
<H3>Synopsis</H3>
<P><B>epminstall</B><I> options</I> file1 file2 ... fileN directory</P>
<P><B>epminstall</B><I> options</I> file1 file2</P>
<P><B>epminstall</B><I> options</I> -d directory1 directory2 ...
 directoryN</P>
<H3>Description</H3>
<P><B>epminstall</B> adds or replaces a directory, file, or symlink in a
 list file. The default list file is<VAR> epm.list</VAR> and can be
 overridden using the <CODE>EPMLIST</CODE> environment variable or the <CODE>
--list-file</CODE> option.</P>
<P>Entries are either added to the end of the list file or replaced
 in-line. Comments, directives, and variable declarations in the list
 file are preserved.</P>
<H3>Options</H3>
<P><B>epminstall</B> recognizes the standard Berkeley<I> install</I>
 command options:</P>
<UL>
<DL>
<DT>-b</DT>
<DD>Make a backup of existing files (ignored, default for EPM.)</DD>
<DT>-c</DT>
<DD>BSD old compatibility mode (ignored.)</DD>
<DT>-g<I> group</I></DT>
<DD>Set the group owner of the file or directory to<I> group</I>. The
 default group is &quot;sys&quot;.</DD>
<DT>-m<I> mode</I></DT>
<DD>Set the permissions of the file or directory to<I> mode</I>. The
 default permissions are 0755 for directories and executable files and
 0644 for non-executable files.</DD>
<DT>-o<I> owner</I></DT>
<DD>Set the owner of the file or directory to<I> owner</I>. The default
 owner is &quot;root&quot;.</DD>
<DT>-s</DT>
<DD>Strip the files (ignored, default for EPM.)</DD>
<DT>--list-file<I> filename.list</I></DT>
<DD>Specify the list file to update.</DD>
</DL>
</UL>
<H3>See Also</H3>
<P><A HREF="#epm">epm(1)</A> - create software packages.
<BR><A HREF="#mkepmlist"> mkepmlist(1)</A> - make an epm list file from
 a directory.
<BR><A HREF="#REFERENCE"> epm.list(5)</A> - epm list file format.</P>
<H3>Copyright</H3>
<P>Copyright 1999-2001 by Easy Software Products, All Rights Reserved.</P>
<P>This program is free software; you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation; either version 2, or (at your option) any
 later version.</P>
<P>This program is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 General Public License for more details.</P>

<!-- NEW PAGE -->
<H2><A NAME="mkepmlist">mkepmlist</A></H2>
<HR>
<P>Make an EPM list file from a directory.</P>
<H3>Synopsis</H3>
<P><B>mkepmlist</B> [ -g<I> group</I> ] [ -u<I> user</I> ] [ --prefix<I>
 directory</I> ]<I> directory</I> [ ...<I> directory</I> ]</P>
<H3>Description</H3>
<P><B>mkepmlist</B> recursively generates file list entries for files,
 links, and directories. The file list is send to the standard output.</P>
<P>The<I> -g</I> option overrides the group ownership of the files in
 the specified directories with the specified group name.</P>
<P>The<I> -u</I> option overrides the user ownership of the files in the
 specified directories with the specified user name.</P>
<P>The<I> --prefix</I> option adds the specified directory to the
 destination path. For example, if you installed files to<VAR> /opt/foo</VAR>
 and wanted to build a distribution that installed the files in<VAR>
 /usr/local</VAR>, the following command would generate a file list that
 is installed in<VAR> /usr/local</VAR>:</P>
<UL>
<PRE>
<KBD>mkepmlist --prefix=/usr/local /opt/foo &gt;foo.list ENTER</KBD>
</PRE>
</UL>
<H3>See Also</H3>
<P><A HREF="#epm">epm(1)</A> - create software packages.
<BR><A HREF="#epminstall"> epminstall(1)</A> - add a directory, file, or
 symlink to a list file.
<BR><A HREF="#REFERENCE"> epm.list(5)</A> - epm list file format.</P>
<H3>Copyright</H3>
<P>Copyright 1999-2001 by Easy Software Products, All Rights Reserved.</P>
<P>This program is free software; you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation; either version 2, or (at your option) any
 later version.</P>
<P>This program is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 General Public License for more details.</P>

<!-- NEW PAGE -->
<H2><A NAME="setup">setup</A></H2>
<HR>
<P>Graphical setup program for the ESP package manager.</P>
<H3>Synopsis</H3>
<P><B>setup</B> [<I> directory</I> ]</P>
<H3>Description</H3>
<P><B>setup</B> provides a graphical installation interface for
 EPM-generated portable installation packages. It presents a
 step-by-step dialog for collecting a list of packages to install and
 accepting any license agreements for those packages.</P>
<P><B>setup</B> searches for products in the current directory or the
 directory specified on the command-line.</P>
<H3>Installation Types</H3>
<P>The default type of installation is &quot;custom&quot;. That is, users will be
 able to select from the list of products and install them.</P>
<P><B>setup</B> also supports other types of installations. The<I>
 setup.types</I> file, if present, defines the other installation types.</P>
<H3>See Also</H3>
<P><A HREF="#epm">epm(1)</A> - create software packages.
<BR><A HREF="#SETUPTYPES"> setup.types(5)</A> - epm gui setup types file
 format.</P>
<H3>Copyright</H3>
<P>Copyright 1999-2001 by Easy Software Products, All Rights Reserved.</P>
<P>This program is free software; you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation; either version 2, or (at your option) any
 later version.</P>
<P>This program is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 General Public License for more details.</P>
<HR>
<H1 ALIGN="RIGHT"><A NAME="REFERENCE">C - List File Reference</A></H1>
<P>This appendix provides a complete reference for the EPM list file and
 setup types formats.</P>
<H2><A NAME="8_1">The EPM List File Format</A></H2>
<P>Each<I> EPM</I> product has an associated list file that describes
 the files to include with the product. Comment lines begin with the &quot;#&quot;
 character and are ignored. All other non-blank lines must begin with a
 letter, dollar sign (&quot;$&quot;), or the percent sign (&quot;%&quot;).</P>
<H3>List File Directives</H3>
<P>The following list describes all of the list file directives
 supported by<I> EPM</I>:</P>
<UL>
<DL>
<DT>$name=value</DT>
<DD>Sets the named variable to<I> value</I>.<B> Note:</B> Variables set
 in the list file are overridden by variables specified on the
 command-line or in the current environment.</DD>
<DT>%copyright<I> copyright notice</I></DT>
<DD>Sets the copyright notice for the file.</DD>
<DT>%description<I> description text</I></DT>
<DD>Adds a line of descriptive text to the distribution. Multiple lines
 are supported.</DD>
<DT>%format<I> format [... format]</I></DT>
<DD>Uses following files and directives only if the distribution format
 is the same as<I> format</I>.</DD>
<DT>%format !<I>format [... format]</I></DT>
<DD>Uses following files and directives only if the distribution format
 is not the same as<I> format</I>.</DD>
<DT>%include<I> filename</I></DT>
<DD>Includes files listed in<I> filename</I>.</DD>
<DT>%incompat<I> product</I></DT>
<DT>%incompat<I> filename</I></DT>
<DD>Indicates that this product is incompatible with the named product
 or file.</DD>
<DT>%install<I> script or program</I></DT>
<DD>Specifies a script or program to be run after all files are
 installed. (This has been obsoleted by the %postinstall directive)</DD>
<DT>%license<I> license file</I></DT>
<DD>Specifies the file to display as the software license.</DD>
<DT>%packager<I> name of packager</I></DT>
<DD>Specifies the name of the packager.</DD>
<DT>%patch<I> script or program</I></DT>
<DD>Specifies a script or program to be run after all files are patched.
 (This has been obsoleted by the %postpatch directive)</DD>
<DT>%postinstall<I> script or program</I></DT>
<DD>Specifies a script or program to be run after all files are
 installed.</DD>
<DT>%postpatch<I> script or program</I></DT>
<DD>Specifies a script or program to be run after all files are patched.</DD>
<DT>%postremove<I> script or program</I></DT>
<DD>Specifies a script or program to be run after removing files.</DD>
<DT>%preinstall<I> script or program</I></DT>
<DD>Specifies a script or program to be run before all files are
 installed.</DD>
<DT>%prepatch<I> script or program</I></DT>
<DD>Specifies a script or program to be run before all files are
 patched.</DD>
<DT>%preremove<I> script or program</I></DT>
<DD>Specifies a script or program to be run before removing files.</DD>
<DT>%product<I> product name</I></DT>
<DD>Specifies the product name.</DD>
<DT>%readme<I> readme file</I></DT>
<DD>Specifies a README file to be included in the distribution.</DD>
<DT>%remove<I> script or program</I></DT>
<DD>Specifies a script or program to be run before removing files. (This
 has been obsoleted by the %preremove directive)</DD>
<DT>%release<I> number</I></DT>
<DD>Specifies the release or build number of a product (defaults to 0).</DD>
<DT>%replaces<I> product</I></DT>
<DD>Indicates that this product replaces the named product.</DD>
<DT>%requires<I> product</I></DT>
<DT>%requires<I> filename</I></DT>
<DD>Indicates that this product requires the named product or file.</DD>
<DT>%vendor<I> vendor or author name</I></DT>
<DD>Specifies the vendor or author of the product.</DD>
<DT>%version<I> version number</I></DT>
<DD>Specifies the version number of the product.</DD>
<DT>%system<I> system[-release] [... system[-release]]</I></DT>
<DD>Specifies that the following files should only be used for the
 specified operating systems and releases.</DD>
<DT>%system !<I>system[-release] [... system[-release]]</I></DT>
<DD>Specifies that the following files should not be used for the
 specified operating systems and releases.</DD>
<DT>%system all</DT>
<DD>Specifies that the following files are applicable to all operating
 systems.</DD>
<DT>c<I> mode user group destination source</I></DT>
<DT>C<I> mode user group destination source</I></DT>
<DD>Specifies a configuration file for installation. The second form
 specifies that the file has changed or is new and should be included as
 part of a patch. Configuration files are installed as &quot;destination.N&quot;
 if the destination already exists.</DD>
<DT>d<I> mode user group destination -</I></DT>
<DT>D<I> mode user group destination -</I></DT>
<DD>Specifies a directory should be created when installing the
 software. The second form specifies that the directory is new and
 should be included as part of a patch.</DD>
<DT>f<I> mode user group destination source</I></DT>
<DT>F<I> mode user group destination source</I></DT>
<DD>Specifies a file for installation. The second form specifies that
 the file has changed or is new and should be included as part of a
 patch.</DD>
<DT>f<I> mode user group destination source/pattern</I></DT>
<DT>F<I> mode user group destination source/pattern</I></DT>
<DD>Specifies one or more files for installation using shell wildcard
 patterns. The second form specifies that the files have changed or are
 new and should be included as part of a patch.</DD>
<DT>i<I> mode user group service-name source</I></DT>
<DT>I<I> mode user group service-name source</I></DT>
<DD>Specifies an initialization script for installation. The second form
 specifies that the file has changed or is new and should be included as
 part of a patch. Initialization scripts are stored in<VAR>
 /etc/software/init.d</VAR> and are linked to the appropriate
 system-specific directories for run levels 0, 2, 3, and 5.
 Initialization scripts<B> must</B> accept at least the<I> start</I> and<I>
 stop</I> commands.</DD>
<DT>l<I> mode user group destination source</I></DT>
<DT>L<I> mode user group destination source</I></DT>
<DD>Specifies a symbolic link in the installation. The second form
 specifies that the link has changed or is new and should be included as
 part of a patch.</DD>
<DT>R<I> mode user group destination</I></DT>
<DD>Specifies that the file is to be removed upon patching. The<I> user</I>
 and<I> group</I> fields are ignored. The<I> mode</I> field is only used
 to determine if a check should be made for a previous version of the
 file.</DD>
</DL>
</UL>
<H3>List Variables</H3>
<P><I>EPM</I> maintains a list of variables and their values which can
 be used to substitute values in the list file. These variables are
 imported from the current environment and taken from the command-line
 and list file as provided. Substitutions occur when the variable name
 is referenced with the dollar sign ($):</P>
<UL>
<PRE>
%install echo What is your name:
%install read $$name
%install echo Your name is $$name

f 0555 root sys ${bindir}/foo foo
f 0555 root sys $datadir/foo/foo.dat foo.dat
</PRE>
</UL>
<P>Variable names can be surrounded by curley brackets (${name}) or
 alone ($name); without brackets the name is terminated by the first
 slash (/), dash (-), or whitespace. The dollar sign can be inserted
 using $$.</P>
<H2><A NAME="SETUPTYPES">The setup.types File</A></H2>
<P>The EPM<B> setup</B> program normally presents the user with a list
 of software products to install, which is called a &quot;custom&quot; software
 installation.</P>
<P>If a file called<I> setup.types</I> is present in the package
 directory, the user will instead be presented with a list of instal-
 lation types. Each type has an associated product list which determines
 the products that are installed by default. If a type has no products
 associated with it, then it is treated as a custom installation and the
 user is presented with a list of packages to choose from.</P>
<P>The<I> setup.types</I> file is an ASCII text file consisting of type
 and product lines. Comments can be inserted by starting a line with the
 pound sign (#). Each installation type is defined by a line starting
 with the word <CODE>TYPE</CODE>. Products are defined by a line
 starting with the word <CODE>INSTALL</CODE>:</P>
<UL>
<PRE>
TYPE Typical End-User Configuration
INSTALL foo
INSTALL foo-help
TYPE Typical Developer Configuration
INSTALL foo
INSTALL foo-help
INSTALL foo-devel
INSTALL foo-examples
TYPE Custom Configuration
</PRE>
</UL>
<P>In the example above, three installation types are defined. Since the
 last type includes no products, the user will be presented with the
 full list of products to choose from.</P>
<HR>
<H1 ALIGN="RIGHT"><A NAME="RELNOTES">D - Release Notes</A></H1>
<P>This appendix lists the change log for each release of the EPM
 software.</P>
<H2><A NAME="9_1">Changes in EPM v3.0</A></H2>
<UL>
<LI>Added new documentation.</LI>
<LI>Added new &quot;-a arch&quot; option to support specific architectures (e.g.
 i586, i686, ultrasparc, etc.)</LI>
<LI>Added support for the *BSD package format using pkg_create.</LI>
<LI>Added support for the AIX package format using the backup program.</LI>
<LI>Added new epminstall utility to build list files from &quot;make install&quot;
 targets.</LI>
<LI>Added snprintf/vsnprintf functions for systems that don't provide
 them, and use snprintf and vsnprintf for all formatted strings that
 aren't just numbers.</LI>
<LI>Added new run_command() function to replace use of system()
 function.</LI>
<LI>Added new %provides directive.</LI>
<LI>Revamped the setup GUI, including support for installation types in
 the setup GUI, so that you can select groups of products or choose a
 custom installation.</LI>
<LI>The mkepmlist utility had a bad regular expression that thought that
 any argument (directory names, etc.) with a dash (&quot;-&quot;) in it was an
 unsupported option.</LI>
<LI>Fixed a bug in the removal script: config files were removed by the
 remove script...</LI>
<LI>Changed the config file install logic to copy the new config file
 (instead of moving it), so that an unchanged config file can be
 detected and removed. This provides the best of both worlds: unchanged
 config files are update automatically by an upgrade/install, while
 changed ones are preserved.</LI>
</UL>
<H2><A NAME="9_2">Changes in EPM v2.8</A></H2>
<UL>
<LI>The line breaking code did not include an extra space, so filenames
 in the portable install/patch/ remove scripts would be joined instead
 of separated.</LI>
<LI>The setup GUI did not allow the user to toggle a software product
 for distribution if the product was selected (nav box around it).</LI>
<LI>The mkepmlist program didn't get the permissions of each file (just
 the parent directory.)</LI>
<LI>The portable installation scripts used the -L or -h option to test
 for symlinks with the test command. The choice of option was based on
 the build platform, making the script non-portable. Now use -h
 exclusively since it is supported on all UNIX's we have access to, even
 with GNU test even though it isn't documented...</LI>
</UL>
<H2><A NAME="9_3">Changes in EPM v2.7</A></H2>
<UL>
<LI>Fixed a bug in the configuration script with the
 --with-fltk-includes option.</LI>
<LI>Tru64 UNIX distributions now use the name &quot;tru64&quot; instead of
 &quot;dunix&quot;. &quot;dunix&quot; is still supported in list files for compatibility
 with old list files.</LI>
<LI>Added support for portable scripts under AIX.</LI>
<LI>Fixed the space checking code in portable installation scripts.</LI>
<LI>Now break up long lines in the portable install/patch/ remove
 scripts.</LI>
</UL>
<H2><A NAME="9_4">Changes in EPM v2.6</A></H2>
<UL>
<LI>Changed the automatic version number generation code to properly
 handle patch, beta, and pre releases.</LI>
<LI>Added support for release numbers in RPM files.</LI>
<LI>Added support for version number ranges in dependencies, either as
 &quot;low-version high-version&quot;, &quot;&lt; version&quot;, or &quot;&gt; version&quot;.</LI>
<LI>Eliminated some GCC warnings about using a char to index into an
 array.</LI>
<LI>Added a disk space check to the portable installation scripts.</LI>
<LI>Added a new mkepmlist utility, based on a Perl script by Christian
 Lademann.</LI>
<LI>Added a &quot;keep files&quot; option (-k) to epm to keep the intermediate
 (spec, etc.) files around after building the binary distribution.</LI>
<LI>Added support for Tru64 UNIX software packages (setld).</LI>
<LI>Patch distributions were incorrectly backing up the original files,
 causing the original backup to be lost.</LI>
<LI>Pre/post install/remove scripts were not using the right filename
 for Solaris PKG distributions.</LI>
</UL>
<H2><A NAME="9_5">Changes in EPM v2.5</A></H2>
<UL>
<LI>Added support for pre-install, post-install, pre-patch, post-patch,
 pre-remove, and post-remove commands.</LI>
<LI>There was no way to use a literal $ in scripts or in filenames. Use
 $$ to include a single $.</LI>
<LI>The config and license file support for AT&amp;T software packages did
 not check to see if the source file had an absolute path. This would
 produce an invalid prototype file.</LI>
<LI>The RPM --target option was not being called with an equal sign,
 which caused problems with RPM 4.0.</LI>
<LI>Updated the Debian packager to use the prerm and postrm script names
 to match reality.</LI>
<LI>Updated the Debian packager to support the Replaces dependency.</LI>
<LI>Updated the portable and RPM distributions to check for the new SuSE
 7.1 init.d directories.</LI>
<LI>RPM distributions now use %config(noreplace) for config files, to
 duplicate the behavior that is expected.</LI>
<LI>The portable scripts now use the autoconf echo test to determine the
 proper options for echo (-n or \c), rather then hardcoding this based
 on the build system.</LI>
</UL>
<H2><A NAME="9_6">Changes in EPM v2.4</A></H2>
<UL>
<LI>The [] wildcard matching did not skip over the character that was
 matched. This prevented matches in most cases...</LI>
</UL>
<H2><A NAME="9_7">Changes in EPM v2.3</A></H2>
<UL>
<LI>Fix for an incredibly stupid bug in the portable distribution code -
 was using ! instead of ~ to mask off the write permission bits in the
 distribution archive.</LI>
<LI>Now use getpwuid() instead of getlogin() to get the username of the
 packager.</LI>
<LI>The RPM distributions now use the same init.d script logic as
 portable distributions. This should make them portable to all known
 Linux distributions as well as avoid a *very* nasty installer bug in
 RedHat 7.0.</LI>
<LI>The HP-UX swinstall code did not properly handle directories or
 config files.</LI>
<LI>The [] wildcard matching rule did not accept ranges (e.g. &quot;[a-z]&quot;,
 &quot;[0-9]&quot;, etc.)</LI>
<LI>Added VPATH support and distribution targets to Makefile.</LI>
<LI>Added support for defining variables in list files; the format is
 &quot;$name=value&quot;.</LI>
<LI>The variable expansion code didn't check for ${name}.</LI>
</UL>
<H2><A NAME="9_8">Changes in EPM v2.2</A></H2>
<UL>
<LI>New HTML documentation files.</LI>
<LI>Updated the BuildRoot directive in RPM spec files to be an absolute
 path; RedHat 6.2's version of RPM adds a leading slash otherwise.</LI>
<LI>IRIX defaults to run level 2...</LI>
<LI>The setup GUI now displays an error message if run by a non-root
 user.</LI>
<LI>The setup GUI now provides &quot;Install All&quot; and &quot;Install None&quot; buttons
 in the software selection pane.</LI>
<LI>Added a &quot;native&quot; distribution format to select the native format for
 a particular OS (Linux defaults to RPM format...)</LI>
<LI>The tar file generation code now always appends at least 2 zeroed
 blocks to the end of the archive. This eliminates error messages from
 Solaris tar and seems to be compatible with all other tar programs.</LI>
<LI>Added the SuSE RPM directory to the standard search path.</LI>
<LI>Added support for a new %packager directive.</LI>
<LI>The strip command used was redirecting stderr before redirecting
 stdout.</LI>
<LI>The portable distributions now set the umask to avoid problems with
 buggy tar programs and Linux distributions.</LI>
<LI>Added command-line option to specify the location of the setup
 program.</LI>
<LI>Added support for wildcards in source filenames.</LI>
<LI>The OS version number is now truncated to only contain the major and
 minor release numbers.</LI>
</UL>
<H2><A NAME="9_9">Changes in EPM v2.1</A></H2>
<UL>
<LI>Moved setup program to /usr/lib/epm ($prefix/lib/epm) to avoid name
 clash with RedHat setup program.</LI>
<LI>Added Debian distribution files from Jeff Licquia.</LI>
<LI>Configure script changes for GCC 2.95.x and Solaris.</LI>
<LI>Portability fixes.</LI>
<LI>Now look for RPMS in different &quot;standard&quot; locations after building
 them; the RPMDIR environment variable can be used to override the
 default locations.</LI>
<LI>The sample project list file (epm.list) was missing from the 2.0
 distribution.</LI>
<LI>Now check for write permission in /usr by writing a test file
 (/usr/.writetest); this should make diskless client installations more
 reliable.</LI>
<LI>Added support for variables on the command line (name=value); insert
 into project filenames using $name.</LI>
<LI>Variable expansion is now done on all lines and fields. This allows
 variables to be used in scripts and in the permissions field, for
 example.</LI>
<LI>Now only specify run levels 0 and 3 for init scripts (0, 3, and 5
 for Linux.)</LI>
<LI>Now support init scripts in /sbin/init.d and /sbin/init.d/rcN.d
 (SuSE.)</LI>
<LI>RPM distributions should now work OK for non-Red Hat based systems,
 in particular for init scripts.</LI>
<LI>PKG distributions are now also generated in the &quot;package stream&quot;
 format as well as the directory and tar.gz file formats.</LI>
</UL>
<H2><A NAME="9_10">Changes in EPM v2.0</A></H2>
<UL>
<LI>New &quot;-f&quot; option to generate vendor-specific software distributions.
 Now support AT&amp;T, Debian, HP-UX, IRIX, and Red Hat software
 distributions.</LI>
<LI>New &quot;-s&quot; option to include the ESP Software Wizard (GUI) with
 portable distributions.</LI>
<LI>The &quot;-t&quot; option (test) is no longer supported.</LI>
<LI>New &quot;-v&quot; option to control the amount of information that is
 reported.</LI>
<LI>New graphical setup program for portable distributions.</LI>
<LI>New &quot;description&quot; directive.</LI>
<LI>New &quot;format&quot; directive.</LI>
<LI>New &quot;include&quot; directive.</LI>
<LI>New &quot;replaces&quot; directive.</LI>
<LI>Portable distributions should now be more portable.</LI>
</UL>
<H2><A NAME="9_11">Changes in EPM v1.7</A></H2>
<UL>
<LI>The %requires and %incompat directives now support specification of
 files as well as products.</LI>
<LI>The init script installation code now creates a link in the init.d
 subdirectory to avoid frustrating well-trained fingers.</LI>
<LI>The progress messages for shared and non-shared software were the
 same.</LI>
</UL>
<H2><A NAME="9_12">Changes in EPM v1.6</A></H2>
<UL>
<LI>Installation archives were missing the &quot;.ss&quot; and &quot;.pss&quot; files that
 were added to support diskless installations.</LI>
<LI>The scripts didn't handle removing distributions that had no
 non-shared components.</LI>
<LI>The scripts didn't return a non-zero exit status if the user did not
 agree with the license or want to install.</LI>
</UL>
<H2><A NAME="9_13">Changes in EPM v1.5</A></H2>
<UL>
<LI>Now support diskless installations; all files destined for /usr are
 put in a separate archive and are installed (or removed) only if /usr
 is read+write.</LI>
</UL>
<H2><A NAME="9_14">Changes in EPM v1.4</A></H2>
<UL>
<LI>Now map group &quot;sys&quot; to &quot;system&quot; for Digital UNIX and &quot;root&quot; for
 Linux.</LI>
<LI>The initialization script installation now checks for the presence
 of run levels 4 and 5.</LI>
</UL>
<H2><A NAME="9_15">Changes in EPM v1.3</A></H2>
<UL>
<LI>Now use the &quot;p&quot; option to tar to ensure that file permissions are
 created properly. This is normally the default for the super-user, but
 not under Digital UNIX!</LI>
<LI>Initialization scripts are now linked to run levels 0, 2, 3, 4, and
 5.</LI>
</UL>
<H2><A NAME="9_16">Changes in EPM v1.2</A></H2>
<UL>
<LI>Patch distributions were not correctly named.</LI>
<LI>Added new &quot;initialization script&quot; file types &quot;i&quot; and &quot;I&quot;. The new
 file types place the scripts in /etc/software/init.d and make links to
 the appropriate system-specific rc.d directories and run the scripts to
 start and stop things accordingly.</LI>
</UL>
<H2><A NAME="9_17">Changes in EPM v1.1</A></H2>
<UL>
<LI>The &quot;whoami&quot; command isn't always in the user's path, so scripts now
 use a hard-coded path (setup by the configure script) to the program.</LI>
<LI>Added a check for IRIX64 (64-bit kernel instead of n32.)</LI>
<LI>The %system directive now supports release numbers, e.g. &quot;irix-6.5&quot;.</LI>
<LI>The %system directive now supports &quot;!&quot; (not) operator so you can do
 things like &quot;%system irix !irix-6.5&quot; to select any IRIX release except
 IRIX 6.5.</LI>
<LI>Files that already exist on the system are renamed to &quot;filename.O&quot;
 on installation and back to &quot;filename&quot; when removed (except for config
 files, which don't overwrite and aren't removed.)</LI>
<LI>Prerequisites (%required directive) now look for required product in
 the current directory and install it automatically if it is available
 and not already installed.</LI>
<LI>The copyright notice in the installation script was not displayed if
 the user used the &quot;now&quot; option.</LI>
</UL>
</BODY>
</HTML>
